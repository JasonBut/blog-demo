{"version":3,"sources":["webpack:///./src/Components/Commons/DataDisplayHOC.vue?6ccd","webpack:///src/Components/Commons/DataDisplayHOC.vue","webpack:///./src/Components/Commons/DataDisplayHOC.vue?b412","webpack:///./src/Components/Commons/DataDisplayHOC.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","_t","post","list","paginationData","options","handleCurrentChange","staticRenderFns","DataDisplayHOCvue_type_script_lang_js_","name","mixins","Object","Mixins","props","target","type","String","required","computed","objectSpread","vuex_esm","created","requestGetData","methods","updateStore","Store","UPDATE_STORE","_requestGetData","asyncToGenerator","regeneratorRuntime","mark","_callee","$route","$router","getData","lowerCaseTarget","targetToPost","hasPostListInStore","filter","id","_this$postFilterFromL","_this$postFilterFromL2","data","wrap","_context","prev","next","toLowerCase","endsWith","length","title","params","categoryName","postFilterFromList","slicedToArray","abrupt","callback","t0","stop","apply","arguments","Commons_DataDisplayHOCvue_type_script_lang_js_","component","componentNormalizer","__webpack_exports__"],"mappings":"wIAAA,IAAAA,EAAA,WAA0B,IAAAC,EAAAC,KAAaC,EAAAF,EAAAG,eAA0BC,EAAAJ,EAAAK,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAAJ,EAAAM,GAAA,gBAAwCC,KAAAP,EAAAO,KAAAC,KAAAR,EAAAS,eAAAD,KAAAE,QAAAV,EAAAS,eAAAC,QAAAC,oBAAAX,EAAAW,uBAA0H,IAC3PC,EAAA,iGCcAC,EAAA,CACAC,KAAA,UACAC,OAAA,CAAAC,OAAAC,EAAA,KAAAD,IACAE,MAAA,CACAC,OAAA,CACAC,KAAAC,OACAC,UAAA,IAIAC,SAAAP,OAAAQ,EAAA,KAAAR,CAAA,GACAA,OAAAS,EAAA,KAAAT,CAAA,iBACAA,OAAAS,EAAA,KAAAT,CAAA,yBAGAU,QAfA,WAgBAzB,KAAA0B,kBAGAC,QAAAZ,OAAAQ,EAAA,KAAAR,CAAA,GACAA,OAAAS,EAAA,KAAAT,CAAA,aACAA,OAAAS,EAAA,KAAAT,CAAA,CAAAa,YAAAC,EAAA,KAAAC,eAFA,CAIAJ,eAJA,eAAAK,EAAAhB,OAAAiB,EAAA,KAAAjB,CAAAkB,mBAAAC,KAAA,SAAAC,IAAA,IAAAC,EAAAC,EAAA9B,EAAA+B,EAAApB,EAAAqB,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAA,OAAAb,mBAAAc,KAAA,SAAAC,GAAA,eAAAA,EAAAC,KAAAD,EAAAE,MAAA,UAKAd,EAAApC,KAAAoC,OAAAC,EAAArC,KAAAqC,QAAA9B,EAAAP,KAAAO,KAAA+B,EAAAtC,KAAAsC,QAAApB,EAAAlB,KAAAkB,OACAqB,EAAArB,EAAAiC,cACAX,IAAAD,EAAAa,SAAA,QAGAX,KAAAlC,EAAA8C,OAAA,GAAA9C,EAAA,GAAA+C,OAGAZ,EAAAN,EAAAmB,OAAAC,aACAb,EAAAP,EAAAmB,OAAAZ,IAMAH,IAAAC,EApBA,CAAAO,EAAAE,KAAA,gBAAAN,EAqBA5C,KAAAyD,mBAAAd,GArBAE,EAAA9B,OAAA2C,EAAA,KAAA3C,CAAA6B,EAAA,GAqBAE,EArBAD,EAAA,GAsBA7C,KAAA4B,YAAA,CAAAV,OAAA,OAAA4B,SAtBAE,EAAAE,KAAA,GAuBAZ,EAAA,CAAApB,OAAA,WAAAyB,OAvBA,eAAAK,EAAAW,OAAA,yBAAAX,EAAAE,KAAA,GA4BAZ,EAAA,CAAAsB,SAAA7C,OAAAC,EAAA,KAAAD,CAAAsB,GAAA,GAAAnB,OAAAqB,EAAAI,KAAAD,WA5BA,WAAAM,EAAAa,GA6BArB,GA7BAQ,EAAAa,GAAA,CAAAb,EAAAE,KAAA,gBAAAF,EAAAE,KAAA,GA6BAZ,EAAA,CAAApB,OAAA,WAAAyB,OA7BA,yBAAAK,EAAAc,SAAA3B,EAAAnC,SAAA,SAAA0B,IAAA,OAAAK,EAAAgC,MAAA/D,KAAAgE,WAAA,OAAAtC,EAAA,MClCuWuC,EAAA,cCOvWC,EAAgBnD,OAAAoD,EAAA,KAAApD,CACdkD,EACAnE,EACAa,GACF,EACA,KACA,KACA,MAIeyD,EAAA,WAAAF","file":"js/chunk-2d212f98.0e1d426b.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_vm._t(\"default\",null,{post:_vm.post,list:_vm.paginationData.list,options:_vm.paginationData.options,handleCurrentChange:_vm.handleCurrentChange})],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <slot\r\n        :post=\"post\"\r\n        :list=\"paginationData.list\"\r\n        :options=\"paginationData.options\"\r\n        :handleCurrentChange=\"handleCurrentChange\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapState, mapGetters, mapActions, mapMutations } from 'vuex';\r\nimport { RequestFailed, PaginationMixin } from '@/Assets/Mixins';\r\nimport { Types } from '@/Store';\r\nexport default {\r\n  name: 'GetData',\r\n  mixins: [PaginationMixin()],\r\n  props: {\r\n    target: {\r\n      type: String,\r\n      required: true\r\n    }\r\n  },\r\n\r\n  computed: {\r\n    ...mapState(['list', 'post']),\r\n    ...mapGetters(['postFilterFromList'])\r\n  },\r\n\r\n  created () {\r\n    this.requestGetData();\r\n  },\r\n\r\n  methods: {\r\n    ...mapActions(['getData']),\r\n    ...mapMutations({ updateStore: Types.UPDATE_STORE }),\r\n\r\n    async requestGetData () {\r\n      const { $route, $router, list, getData, target } = this;\r\n      const lowerCaseTarget = target.toLowerCase();\r\n      const targetToPost = !!lowerCaseTarget.endsWith('post');\r\n\r\n      // 判断store中list状态是否有数据,并根据标题判断是否博文数组\r\n      const hasPostListInStore = !!(list.length > 0 && list[0].title);\r\n\r\n      // 根据路由中的数据返回用于asyncFetch方法的参数\r\n      const filter = $route.params.categoryName;\r\n      const id = $route.params.id;\r\n\r\n      /*\r\n      * 如果从列表页跳转到详情页,因为state树list状态已存有博文的信息\r\n      * 可以从list状态中直接提取,不需要向服务器发送请求\r\n      */\r\n      if (targetToPost && hasPostListInStore) {\r\n        const [ data ] = this.postFilterFromList(id);\r\n        this.updateStore({ target: 'post', data });\r\n        await getData({ target: 'comments', id });\r\n        return;\r\n      }\r\n\r\n      // 其余情况正常发送请求获取数据\r\n      await getData({ callback: RequestFailed($router, true), target: lowerCaseTarget, id, filter });\r\n      targetToPost && await getData({ target: 'comments', id });\r\n    }\r\n  }\r\n};\r\n</script>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DataDisplayHOC.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DataDisplayHOC.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./DataDisplayHOC.vue?vue&type=template&id=158091b2&\"\nimport script from \"./DataDisplayHOC.vue?vue&type=script&lang=js&\"\nexport * from \"./DataDisplayHOC.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}