{"version":3,"sources":["webpack:///./src/Components/Back/BackCategory/index.vue?8b3b","webpack:///src/Components/Back/BackCategory/index.vue","webpack:///./src/Components/Back/BackCategory/index.vue?a86c","webpack:///./src/Components/Back/BackCategory/index.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","_b","attrs","list","categoryWithoutAbout","editable","on","on-delete","handleDelete","on-edit","handleEdit","on-save","handleSave","on-cancel","handleCancel","on-add","handleAdd","categoryInfo","staticRenderFns","BackCategoryvue_type_script_lang_js_","name","mixins","Mixins","components","BackCategoryUI","__webpack_require__","e","then","bind","data","editing","cname","label","computed","Object","objectSpread","vuex_esm","_this","row","id","created","length","getData","target","methods","cleanData","_this$categoryWithout","slice","_this$categoryWithout2","slicedToArray","lastItem","pop","$message","error","push","item","_this$categoryInfo","sendData","categoryId","toLowerCase","Back_BackCategoryvue_type_script_lang_js_","component","componentNormalizer","__webpack_exports__"],"mappings":"yHAAA,IAAAA,EAAA,WAA0B,IAAAC,EAAAC,KAAaC,EAAAF,EAAAG,eAA0BC,EAAAJ,EAAAK,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,iBAAAJ,EAAAM,GAAA,CAAmCC,MAAA,CAAOC,KAAAR,EAAAS,qBAAAC,SAAAV,EAAAU,UAAwDC,GAAA,CAAKC,YAAAZ,EAAAa,aAAAC,UAAAd,EAAAe,WAAAC,UAAAhB,EAAAiB,WAAAC,YAAAlB,EAAAmB,aAAAC,SAAApB,EAAAqB,YAAoI,iBAAArB,EAAAsB,cAAA,QACpUC,EAAA,mDCeAC,EAAA,CACAC,KAAA,eACAC,OAAA,CAAAC,EAAA,MACAC,WAAA,CACAC,eAAA,kBAAAC,EAAAC,EAAA,kBAAAC,KAAAF,EAAAG,KAAA,gBAEAC,KANA,WAOA,OACAC,QAAA,GACAb,aAAA,CACAc,MAAA,GACAC,MAAA,MAIAC,SAAAC,OAAAC,EAAA,KAAAD,CAAA,GACAA,OAAAE,EAAA,KAAAF,CAAA,iCADA,CAIA7B,SAJA,WAIA,IAAAgC,EAAAzC,KACA,gBAAA0C,GAAA,OAAAD,EAAAP,UAAAQ,EAAAC,IAAA,OAAAD,EAAAC,OAGAC,QAvBA,WA4BA5C,KAAAQ,qBAAAqC,OAAA,GACA7C,KAAA8C,QAAA,CAAAC,OAAA,gBAGAC,QAAAV,OAAAC,EAAA,KAAAD,CAAA,GACAA,OAAAE,EAAA,KAAAF,CAAA,wBADA,CAGAW,UAHA,WAIAjD,KAAAkC,QAAA,GACAlC,KAAAqB,aAAA,CACAc,MAAA,GACAC,MAAA,IAJA,IAAAc,EAOAlD,KAAAQ,qBAAA2C,OAAA,GAPAC,EAAAd,OAAAe,EAAA,KAAAf,CAAAY,EAAA,GAOAI,EAPAF,EAAA,IAQAE,EAAAX,IAAA3C,KAAAQ,qBAAA+C,OAGAnC,UAdA,WAeA,GAAApB,KAAAkC,QACA,OAAAlC,KAAAwD,SAAAC,MAAA,sBAEAzD,KAAAkC,QAAA,MAEAlC,KAAAQ,qBAAAkD,KAAA,CACAf,GAAA,KACAnB,KAAA,GACAW,MAAA,GACAC,MAAA,MAIAtB,WA5BA,SA4BA6C,GACA,GAAA3D,KAAAkC,QACA,OAAAlC,KAAAwD,SAAAC,MAAA,sBAFA,IAIAd,EAAAgB,EAAAhB,GAAAR,EAAAwB,EAAAxB,MAAAC,EAAAuB,EAAAvB,MAEApC,KAAAkC,QAAAS,EAEA3C,KAAAqB,aAAA,CAAAc,QAAAC,UAGApB,WAvCA,SAuCA2C,GAAA,IACAtC,EAAArB,KAAAqB,aADAuC,EACA5D,KAAAqB,aAAAc,EADAyB,EACAzB,MAAAC,EADAwB,EACAxB,MACA,OAAAD,EAAAU,QAAA,EACA7C,KAAAwD,SAAAC,MAAA,iBAEArB,EAAAS,OAAA,GACA7C,KAAAwD,SAAAC,MAAA,mBAIAzD,KAAA6D,SAAAvB,OAAAC,EAAA,KAAAD,CAAA,GACAjB,EADA,CAEAyC,WAAAH,EAAAhB,GACAnB,KAAAY,EAAA2B,sBAEA/D,KAAAiD,cAGA/B,aAzDA,WA0DAlB,KAAAiD,gBC1G6We,EAAA,cCO7WC,EAAgB3B,OAAA4B,EAAA,KAAA5B,CACd0B,EACAlE,EACAwB,GACF,EACA,KACA,KACA,MAIe6C,EAAA,WAAAF","file":"js/chunk-2d0cf301.b8e694c4.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('BackCategoryUI',_vm._b({attrs:{\"list\":_vm.categoryWithoutAbout,\"editable\":_vm.editable},on:{\"on-delete\":_vm.handleDelete,\"on-edit\":_vm.handleEdit,\"on-save\":_vm.handleSave,\"on-cancel\":_vm.handleCancel,\"on-add\":_vm.handleAdd}},'BackCategoryUI',_vm.categoryInfo,false,true))}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <BackCategoryUI\r\n      :list=\"categoryWithoutAbout\"\r\n      :editable=\"editable\"\r\n      v-bind.sync=\"categoryInfo\"\r\n      @on-delete=\"handleDelete\"\r\n      @on-edit=\"handleEdit\"\r\n      @on-save=\"handleSave\"\r\n      @on-cancel=\"handleCancel\"\r\n      @on-add=\"handleAdd\"\r\n  />\r\n</template>\r\n\r\n<script>\r\nimport { mapGetters, mapActions } from 'vuex';\r\nimport { DeleteDataMixin } from '@/Assets/Mixins';\r\nexport default {\r\n  name: 'BackCategory',\r\n  mixins: [ DeleteDataMixin ],\r\n  components: {\r\n    BackCategoryUI: () => import('./BackCategoryUI')\r\n  },\r\n  data () {\r\n    return {\r\n      editing: '',\r\n      categoryInfo: {\r\n        cname: '',\r\n        label: ''\r\n      }\r\n    };\r\n  },\r\n  computed: {\r\n    ...mapGetters('Back', ['categoryWithoutAbout']),\r\n\r\n    // 判断当前项id值是否正在编辑或新增的条目\r\n    editable () {\r\n      return (row) => (this.editing === row.id) || (row.id === null);\r\n    }\r\n  },\r\n  created () {\r\n    /*\r\n    *  因为后台加载时在详情页已经尝试了一次获取分类列表\r\n    *  如store中没有数据,则发送一次请求去获取列表\r\n    */\r\n    if (this.categoryWithoutAbout.length < 1) {\r\n      this.getData({ target: 'categories' });\r\n    }\r\n  },\r\n  methods: {\r\n    ...mapActions(['getData', 'sendData']),\r\n\r\n    cleanData () {\r\n      this.editing = '';\r\n      this.categoryInfo = {\r\n        cname: '',\r\n        label: ''\r\n      };\r\n      // 提取最后一项,如果没有id则证明是新增的项目,从列表中删除掉\r\n      const [ lastItem ] = this.categoryWithoutAbout.slice(-1);\r\n      (!lastItem.id) && this.categoryWithoutAbout.pop();\r\n    },\r\n\r\n    handleAdd () {\r\n      if (this.editing) {\r\n        return this.$message.error('请先完成现有的条目编辑，再进行操作！');\r\n      }\r\n      this.editing = 'new';\r\n      // 往列表添加一个新项\r\n      this.categoryWithoutAbout.push({\r\n        id: null,\r\n        name: '',\r\n        cname: '',\r\n        label: ''\r\n      });\r\n    },\r\n\r\n    handleEdit (item) {\r\n      if (this.editing) {\r\n        return this.$message.error('请先完成现有的条目编辑，再进行操作！');\r\n      }\r\n      const { id, cname, label } = item;\r\n      // 当前条目id设为editing\r\n      this.editing = id;\r\n\r\n      this.categoryInfo = { cname, label };\r\n    },\r\n\r\n    handleSave (item) {\r\n      const { categoryInfo, categoryInfo: { cname, label } } = this;\r\n      if (cname.length >= 6) {\r\n        return this.$message.error('名称长度不能多于6个字符！');\r\n      }\r\n      if (label.length > 10) {\r\n        return this.$message.error('边栏标签不能多于10个字符！');\r\n      }\r\n\r\n      // 生成payload发给sendData action\r\n      this.sendData({\r\n        ...categoryInfo,\r\n        categoryId: item.id,\r\n        name: label.toLowerCase()\r\n      });\r\n      this.cleanData();\r\n    },\r\n\r\n    handleCancel () {\r\n      this.cleanData();\r\n    }\r\n  }\r\n};\r\n</script>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=5e0081a6&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}